language: node_js
node_js: 9
matrix:
    include:
        - os: linux
          dist: trusty
        - os: osx
          osx_image: xcode8.3
env:
    global:
        - GITHUB_REPO: blckchnd/rudex-ui
        - ORGANIZATION_REPO: blckchnd/rudex.org
        - WALLET_REPO: blckchnd/market.rudex.org
        - CXX=g++-4.8
        - secure: jXsuQpFsda5rZYCJiXYZD0l2KAVlqNElE5tWxS+8kVjQ92lcjXJr3vP+e68CqlM38WVh0lQ8SFkubpkI3y22MnPDpSUKWw2HZm1abc1A4zzk9advI7FJ/hHMJcC6NE0yI06o4S3xazSVpxmlp3arUjn5SaJrzY9ALCvSKuFVBQV7CD2T1A1N6XtSwYY+OYEmkJazwy+oh/7IWBpoqqI3jjU9x+uhn38QNAAezM2sOHXcXhfpdD2oAwdAeiGrhSusLI3PXMV8962pbTJzhCpjZCJy1GEgj8xdzrEocrmMe/LtefXEGBEN4CBm9RJDCBG8XmKwVpjwd2hLsuL1jvWX6ArsFzsi3MOMEmb/JqkoWDPAk8TpzH6pbF5+8P7jWyeDFxEKP69tfhyCZB5z4sTbYoLKSO2H47MwzoyK97AKu55v93gADCZVoun4O92Ez/U77HNFWEFXvMlfSUzSL80zRAanKrATzRF2k1MkTWtOVeRSqvlRat/CQz2OVm2oJwcJE1oi6wyLeaHK0xA+LeL+vQTs4SmxzohhhMUA5A9uoNX0BASVstj4yB7HBbHWTq6xUToD6v31vTxV1UJN3KE88XKQaxGELranxabqLsR+VUt2CNIU9oFNQguVnCJ9RS2FJwZHW7qE1MQm0Jk//dXgAw6AA2phvi9p/zA774IrxCw=
addons:
    apt:
        sources:
            - ubuntu-toolchain-r-test
        packages:
            - gcc-4.8
            - g++-4.8
            - icnsutils
            - graphicsmagick
            - xz-utils
install:
    - npm install -g npm@6
    - npm ci
script: "./build.sh"
after_success: "./deploy.sh"
deploy:
    provider: releases
    tag_name: $TRAVIS_TAG
    name: $TRAVIS_TAG
    body: Automated release from Travis CI with added files from AppVeyor build
    api_key:
        secure: jXsuQpFsda5rZYCJiXYZD0l2KAVlqNElE5tWxS+8kVjQ92lcjXJr3vP+e68CqlM38WVh0lQ8SFkubpkI3y22MnPDpSUKWw2HZm1abc1A4zzk9advI7FJ/hHMJcC6NE0yI06o4S3xazSVpxmlp3arUjn5SaJrzY9ALCvSKuFVBQV7CD2T1A1N6XtSwYY+OYEmkJazwy+oh/7IWBpoqqI3jjU9x+uhn38QNAAezM2sOHXcXhfpdD2oAwdAeiGrhSusLI3PXMV8962pbTJzhCpjZCJy1GEgj8xdzrEocrmMe/LtefXEGBEN4CBm9RJDCBG8XmKwVpjwd2hLsuL1jvWX6ArsFzsi3MOMEmb/JqkoWDPAk8TpzH6pbF5+8P7jWyeDFxEKP69tfhyCZB5z4sTbYoLKSO2H47MwzoyK97AKu55v93gADCZVoun4O92Ez/U77HNFWEFXvMlfSUzSL80zRAanKrATzRF2k1MkTWtOVeRSqvlRat/CQz2OVm2oJwcJE1oi6wyLeaHK0xA+LeL+vQTs4SmxzohhhMUA5A9uoNX0BASVstj4yB7HBbHWTq6xUToD6v31vTxV1UJN3KE88XKQaxGELranxabqLsR+VUt2CNIU9oFNQguVnCJ9RS2FJwZHW7qE1MQm0Jk//dXgAw6AA2phvi9p/zA774IrxCw=
    file_glob: true
    file:
        - build/binaries/RuDEX*
        - build/release-checksums-*
    skip_cleanup: true
    draft: true
    on:
        repo: blckchnd/rudex-ui
        tags: true
